# GoAccess configuration for Caddy JSON logs

# Time Format - For Caddy JSON logs
time-format %s

# Date Format - For Caddy JSON logs  
date-format %s

# Log Format - Caddy JSON structured logs
log-format {ts:"%x.%^",request:{remote_ip:"%h",proto:"%H",method:"%m",host:"%v",uri:"%U",headers:{"User-Agent":["%u"]},tls:{resumed:%^,version:"%k",cipher_suite:"%K",proto:"%^",proto_mutual:%^,server_name:"%^"}},user_id:"%e",duration:%T,size:%b,status:%s,resp_headers:{"Content-Type":["%M"]}}

# Real-time HTML output
real-time-html true

# Enable mouse support
with-mouse true

# Persist data
persist true
restore true

# File options
all-static-files false
ignore-crawlers true

# GeoIP database (optional)
# geoip-database /usr/share/GeoIP/GeoLite2-City.mmdb

# Exclude IPs
exclude-ip 127.0.0.1
exclude-ip ::1

# HTML report title
html-report-title Caddy Access Logs - snadboy.com

# JSON pretty print
json-pretty-print true

# Ignore specific status codes (use ignore-status instead)
# ignore-status 400
# ignore-status 401

# Ignore query strings
ignore-query-string false

# Real-time HTML refresh
html-refresh 1000

# WebSocket support
ws-url wss://logs.snadboy.com:443
port 7890